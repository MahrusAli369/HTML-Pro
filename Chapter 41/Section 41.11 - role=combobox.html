<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Section 41.11 - Role Combobox</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            color: #2c3e50;
            padding: 30px;
        }

        h1 {
            color: #e67e22;
            border-bottom: 3px solid #e67e22;
            padding-bottom: 8px;
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }

        input[role="combobox"] {
            width: 300px;
            padding: 8px;
            border: 2px solid #2980b9;
            border-radius: 5px;
        }

        ul.suggestions {
            border: 2px solid #2980b9;
            width: 316px;
            max-height: 150px;
            overflow-y: auto;
            background-color: #ecf0f1;
            list-style: none;
            padding: 0;
            margin-top: 0;
            border-radius: 0 0 5px 5px;
            position: absolute;
        }

        ul.suggestions li {
            padding: 8px;
            cursor: pointer;
        }

        ul.suggestions li:hover {
            background-color: #f1c40f;
        }

        .combobox-container {
            position: relative;
        }
    </style>
</head>

<body>
    <h1>Role Combobox Example</h1>
    <p>Type a letter to filter the list. This demonstrates <code>role="combobox"</code> with simple typeahead
        functionality.</p>

    <div class="combobox-container">
        <label for="fruit">Choose a fruit:</label>
        <input type="text" id="fruit" role="combobox" aria-expanded="false" autocomplete="off">
        <ul class="suggestions" id="suggestions"></ul>
    </div>

    <script>
        const fruits = ['Apple', 'Banana', 'Cherry', 'Date', 'Fig', 'Grape', 'Kiwi', 'Lemon', 'Mango', 'Orange', 'Peach', 'Pear'];
        const input = document.getElementById('fruit');
        const suggestions = document.getElementById('suggestions');

        input.addEventListener('input', () => {
            const query = input.value.toLowerCase();
            suggestions.innerHTML = '';
            if (!query) {
                input.setAttribute('aria-expanded', 'false');
                return;
            }
            const filtered = fruits.filter(f => f.toLowerCase().startsWith(query));
            input.setAttribute('aria-expanded', filtered.length ? 'true' : 'false');
            filtered.forEach(fruit => {
                const li = document.createElement('li');
                li.textContent = fruit;
                li.addEventListener('click', () => {
                    input.value = fruit;
                    suggestions.innerHTML = '';
                    input.setAttribute('aria-expanded', 'false');
                });
                suggestions.appendChild(li);
            });
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.combobox-container')) {
                suggestions.innerHTML = '';
                input.setAttribute('aria-expanded', 'false');
            }
        });
    </script>
</body>

</html>